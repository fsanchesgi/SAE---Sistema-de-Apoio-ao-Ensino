<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - SAE</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Dashboard</h1>
  <button id="logout">Sair</button>
  <div id="conteudo"></div>

  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.getElementById('logout').addEventListener('click', logout);

      async function carregar() {
        const perfil = await getPerfil();
        if (!perfil) return;

        const container = document.getElementById('conteudo');
        container.innerHTML = `<h2>Bem-vindo(a) ${perfil.nome} - ${perfil.role}</h2>`;

        if (perfil.role === 'admin') {
          container.innerHTML += `<div id="listaUsuarios"></div>`;
          listarUsuariosPendentes();
        } else if (perfil.role === 'professor') {
          container.innerHTML += `<p>Use funções no console: criarAula, criarProva, exportarResultados</p>`;
        } else if (perfil.role === 'aluno' || perfil.role === 'pai') {
          container.innerHTML += `<p>Use funções no console: listarAulasAluno(aluno_id), listarNotasAluno(aluno_id)</p>`;
        }
      }

      carregar();
    });
  </script>
</body>
</html>
